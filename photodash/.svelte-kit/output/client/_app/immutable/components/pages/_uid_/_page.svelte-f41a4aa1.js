import{af as z,S as $,i as S,s as w,P as L,k as M,l as E,m as I,h as d,n as p,b as m,g,t as _,d as b,f,o as J,ad as K,p as h,ag as O,ah as k,w as A,x as F,y as D,z as P,C as G,I as H,J as Q,K as R,e as y,a as U,c as W}from"../../../chunks/index-fb8a4cb6.js";import{s as q,a as X}from"../../../chunks/apistore-9577ccf3.js";import{A as Y}from"../../../chunks/AppShell-cfa6c1e0.js";function v(r,{delay:l=0,duration:i=400,easing:e=z}={}){const t=+getComputedStyle(r).opacity;return{delay:l,duration:i,easing:e,css:n=>`opacity: ${n*t}`}}function Z(r,l,i){let e;L(r,q,o=>i(4,e=o));let{entity:t}=l,{url:n}=l,a,u=new Audio(n);return u.onended=()=>X("homeassistant.toggle",t),r.$$set=o=>{"entity"in o&&i(0,t=o.entity),"url"in o&&i(1,n=o.url)},r.$$.update=()=>{r.$$.dirty&17&&e!==null&&i(2,a=Object.values(e).filter(o=>o.entity_id===t)[0]),r.$$.dirty&12&&(a.state==="on"?u.play():a.state==="off"&&(u.pause(),i(3,u.currentTime=0,u)))},[t,n,a,u,e]}class x extends ${constructor(l){super(),S(this,l,Z,null,w,{entity:0,url:1})}}function ee(r){let l,i,e;return{c(){l=M("div"),this.h()},l(t){l=E(t,"DIV",{class:!0,style:!0}),I(l).forEach(d),this.h()},h(){p(l,"class","image svelte-17f2d8v"),h(l,"background-image","url("+r[1]+")")},m(t,n){m(t,l,n),e=!0},p(t,n){(!e||n&2)&&h(l,"background-image","url("+t[1]+")")},i(t){e||(O(()=>{i||(i=k(l,v,{delay:2e3,duration:1e3},!0)),i.run(1)}),e=!0)},o(t){i||(i=k(l,v,{delay:2e3,duration:1e3},!1)),i.run(0),e=!1},d(t){t&&d(l),t&&i&&i.end()}}}function te(r){let l,i,e;return{c(){l=M("div"),this.h()},l(t){l=E(t,"DIV",{class:!0,style:!0}),I(l).forEach(d),this.h()},h(){p(l,"class","image svelte-17f2d8v"),h(l,"background-image","url("+r[0]+")")},m(t,n){m(t,l,n),e=!0},p(t,n){(!e||n&1)&&h(l,"background-image","url("+t[0]+")")},i(t){e||(O(()=>{i||(i=k(l,v,{delay:2e3,duration:1e3},!0)),i.run(1)}),e=!0)},o(t){i||(i=k(l,v,{delay:2e3,duration:1e3},!1)),i.run(0),e=!1},d(t){t&&d(l),t&&i&&i.end()}}}function le(r){let l,i,e,t;const n=[te,ee],a=[];function u(o,s){return o[2]&&o[0]!==""?0:o[1]!==""?1:-1}return~(i=u(r))&&(e=a[i]=n[i](r)),{c(){l=M("div"),e&&e.c(),this.h()},l(o){l=E(o,"DIV",{id:!0,class:!0});var s=I(l);e&&e.l(s),s.forEach(d),this.h()},h(){p(l,"id","backgroundSlider"),p(l,"class","svelte-17f2d8v")},m(o,s){m(o,l,s),~i&&a[i].m(l,null),t=!0},p(o,[s]){let c=i;i=u(o),i===c?~i&&a[i].p(o,s):(e&&(g(),_(a[c],1,1,()=>{a[c]=null}),b()),~i?(e=a[i],e?e.p(o,s):(e=a[i]=n[i](o),e.c()),f(e,1),e.m(l,null)):e=null)},i(o){t||(f(e),t=!0)},o(o){_(e),t=!1},d(o){o&&d(l),~i&&a[i].d()}}}function ie(r,l,i){let e=2,t=[],n="",a="",u=!0,o;return J(()=>{fetch("/api/localSlideshow?name=Marcy").then(s=>s.json()).then(s=>{t=s,i(0,n=t[0]),i(1,a=t[1])}),o=setInterval(()=>{u?(i(2,u=!u),setTimeout(()=>{i(0,n=t[e])},5e3)):(i(2,u=!u),setTimeout(()=>{i(1,a=t[e])},5e3)),e++,e>t.length-1&&(e=0)},3e4)}),K(()=>{clearInterval(o)}),[n,a,u]}class ne extends ${constructor(l){super(),S(this,l,ie,le,w,{})}}function T(r){var a,u,o;let l,i,e,t=((a=r[0].configuration)==null?void 0:a.backgroundMusicEntity)&&((u=r[0].configuration)==null?void 0:u.backgroundMusicFile)&&V(r),n=((o=r[0].configuration)==null?void 0:o.useLocalPhotos)&&B();return{c(){t&&t.c(),l=U(),n&&n.c(),i=y()},l(s){t&&t.l(s),l=W(s),n&&n.l(s),i=y()},m(s,c){t&&t.m(s,c),m(s,l,c),n&&n.m(s,c),m(s,i,c),e=!0},p(s,c){var j,C,N;(j=s[0].configuration)!=null&&j.backgroundMusicEntity&&((C=s[0].configuration)!=null&&C.backgroundMusicFile)?t?(t.p(s,c),c&1&&f(t,1)):(t=V(s),t.c(),f(t,1),t.m(l.parentNode,l)):t&&(g(),_(t,1,1,()=>{t=null}),b()),(N=s[0].configuration)!=null&&N.useLocalPhotos?n?c&1&&f(n,1):(n=B(),n.c(),f(n,1),n.m(i.parentNode,i)):n&&(g(),_(n,1,1,()=>{n=null}),b())},i(s){e||(f(t),f(n),e=!0)},o(s){_(t),_(n),e=!1},d(s){t&&t.d(s),s&&d(l),n&&n.d(s),s&&d(i)}}}function V(r){let l,i;return l=new x({props:{entity:r[0].configuration.backgroundMusicEntity,url:r[0].configuration.backgroundMusicFile}}),{c(){A(l.$$.fragment)},l(e){F(l.$$.fragment,e)},m(e,t){D(l,e,t),i=!0},p(e,t){const n={};t&1&&(n.entity=e[0].configuration.backgroundMusicEntity),t&1&&(n.url=e[0].configuration.backgroundMusicFile),l.$set(n)},i(e){i||(f(l.$$.fragment,e),i=!0)},o(e){_(l.$$.fragment,e),i=!1},d(e){P(l,e)}}}function B(r){let l,i;return l=new ne({}),{c(){A(l.$$.fragment)},l(e){F(l.$$.fragment,e)},m(e,t){D(l,e,t),i=!0},i(e){i||(f(l.$$.fragment,e),i=!0)},o(e){_(l.$$.fragment,e),i=!1},d(e){P(l,e)}}}function re(r){let l,i,e=r[1]!==null&&T(r);return{c(){e&&e.c(),l=y()},l(t){e&&e.l(t),l=y()},m(t,n){e&&e.m(t,n),m(t,l,n),i=!0},p(t,n){t[1]!==null?e?(e.p(t,n),n&2&&f(e,1)):(e=T(t),e.c(),f(e,1),e.m(l.parentNode,l)):e&&(g(),_(e,1,1,()=>{e=null}),b())},i(t){i||(f(e),i=!0)},o(t){_(e),i=!1},d(t){e&&e.d(t),t&&d(l)}}}function se(r){let l;const i=r[2].default,e=G(i,r,r[3],null),t=e||re(r);return{c(){t&&t.c()},l(n){t&&t.l(n)},m(n,a){t&&t.m(n,a),l=!0},p(n,a){e?e.p&&(!l||a&8)&&H(e,i,n,n[3],l?R(i,n[3],a,null):Q(n[3]),null):t&&t.p&&(!l||a&3)&&t.p(n,l?a:-1)},i(n){l||(f(t,n),l=!0)},o(n){_(t,n),l=!1},d(n){t&&t.d(n)}}}function oe(r){let l,i;return l=new Y({props:{$$slots:{default:[se]},$$scope:{ctx:r}}}),{c(){A(l.$$.fragment)},l(e){F(l.$$.fragment,e)},m(e,t){D(l,e,t),i=!0},p(e,[t]){const n={};t&11&&(n.$$scope={dirty:t,ctx:e}),l.$set(n)},i(e){i||(f(l.$$.fragment,e),i=!0)},o(e){_(l.$$.fragment,e),i=!1},d(e){P(l,e)}}}function ae(r,l,i){let e;L(r,q,u=>i(1,e=u));let{$$slots:t={},$$scope:n}=l,{data:a}=l;return r.$$set=u=>{"data"in u&&i(0,a=u.data),"$$scope"in u&&i(3,n=u.$$scope)},[a,e,t,n]}class _e extends ${constructor(l){super(),S(this,l,ae,oe,w,{data:0})}}export{_e as default};
