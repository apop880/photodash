{"version":3,"file":"apistore-d100c5d7.js","sources":["../../../.svelte-kit/adapter-node/chunks/apistore.js"],"sourcesContent":["import { r as readable } from \"./index2.js\";\nimport \"./index3.js\";\nimport { getAuth, callService } from \"home-assistant-js-websocket\";\nlet conn;\nasync function loadTokens() {\n  try {\n    return JSON.parse(localStorage.hassTokens);\n  } catch (err) {\n    return void 0;\n  }\n}\nconst saveTokens = (tokens) => {\n  localStorage.hassTokens = JSON.stringify(tokens);\n};\nconst stateStore = readable(null, function start(set) {\n  return function stop() {\n  };\n});\nconst action = (serviceType, target) => {\n  let [domain, service] = serviceType.split(\".\");\n  callService(conn, domain, service, void 0, {\n    entity_id: target\n  });\n};\nconst getHassAuth = async (hassBaseUrl) => {\n  let auth = await getAuth({ hassUrl: hassBaseUrl, loadTokens, saveTokens });\n  if (auth.expired) {\n    saveTokens(null);\n    auth = await getAuth({ hassUrl: hassBaseUrl, loadTokens, saveTokens });\n  }\n  return auth;\n};\nexport {\n  action as a,\n  getHassAuth as g,\n  stateStore as s\n};\n"],"names":[],"mappings":";;;;AAGA,IAAI,IAAI,CAAC;AACT,eAAe,UAAU,GAAG;AAC5B,EAAE,IAAI;AACN,IAAI,OAAO,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC,UAAU,CAAC,CAAC;AAC/C,GAAG,CAAC,OAAO,GAAG,EAAE;AAChB,IAAI,OAAO,KAAK,CAAC,CAAC;AAClB,GAAG;AACH,CAAC;AACD,MAAM,UAAU,GAAG,CAAC,MAAM,KAAK;AAC/B,EAAE,YAAY,CAAC,UAAU,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC;AACnD,CAAC,CAAC;AACG,MAAC,UAAU,GAAG,QAAQ,CAAC,IAAI,EAAE,SAAS,KAAK,CAAC,GAAG,EAAE;AACtD,EAAE,OAAO,SAAS,IAAI,GAAG;AACzB,GAAG,CAAC;AACJ,CAAC,EAAE;AACE,MAAC,MAAM,GAAG,CAAC,WAAW,EAAE,MAAM,KAAK;AACxC,EAAE,IAAI,CAAC,MAAM,EAAE,OAAO,CAAC,GAAG,WAAW,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;AACjD,EAAE,WAAW,CAAC,IAAI,EAAE,MAAM,EAAE,OAAO,EAAE,KAAK,CAAC,EAAE;AAC7C,IAAI,SAAS,EAAE,MAAM;AACrB,GAAG,CAAC,CAAC;AACL,EAAE;AACG,MAAC,WAAW,GAAG,OAAO,WAAW,KAAK;AAC3C,EAAE,IAAI,IAAI,GAAG,MAAM,OAAO,CAAC,EAAE,OAAO,EAAE,WAAW,EAAE,UAAU,EAAE,UAAU,EAAE,CAAC,CAAC;AAC7E,EAAE,IAAI,IAAI,CAAC,OAAO,EAAE;AACpB,IAAI,UAAU,CAAC,IAAI,CAAC,CAAC;AACrB,IAAI,IAAI,GAAG,MAAM,OAAO,CAAC,EAAE,OAAO,EAAE,WAAW,EAAE,UAAU,EAAE,UAAU,EAAE,CAAC,CAAC;AAC3E,GAAG;AACH,EAAE,OAAO,IAAI,CAAC;AACd;;;;"}